!function(e){"use strict";var t=["padding","paddingTop","paddingBottom","paddingRight","paddingLeft","border","borderTop","borderBottom","borderRight","borderLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","fontFamily","fontSize","lineHeight","box-sizing"],i=function(t,i){this.$element=e(t),this.$element.data("autoresize-api",this),i=i||{},this.params=e.extend({minHeight:this.$element.height(),maxHeight:~~parseInt(this.$element.css("max-height"),10),defaultHeight:!1,animation:!0,heightCompensation:this.$element.outerHeight()-this.$element.height(),animationDuration:"slow",animationEasing:"swing",onResize:e.noop},this.$element.data(),i),this.params.defaultHeight&&"min"==this.params.defaultHeight&&(this.params.defaultHeight=this.params.minHeight),this.init()};i.prototype={init:function(){{var e=this,t=e.$element;t.get(0)}return"textarea"!==t.prop("tagName").toLowerCase()?(console.error("jQuery.Textarea.Autoresize works only on textarea tags, skipping..."),void console.log("Selected element is: ",t)):(t.addClass("autoresize"),0==e.params.maxHeight&&t.css("overflow","hidden"),e.params.defaultHeight&&(t.on("focus.autoresize",function(){e.setHeight(e.getContentHeight(),e.params.animation)}),t.on("focusout.autoresize",function(){e.setHeight(e.params.defaultHeight,e.params.animation)})),t.on("keydown.autoresize",function(){setTimeout(function(){e.setHeight(e.getContentHeight())},0)}),void t.on("resize.autoresize",function(){setTimeout(function(){e.getMirror().width(t.width()),e.setHeight(e.getContentHeight())},0)}))},destroy:function(){this.getMirror().remove(),this.$element.removeData("autoresize-api"),this.$element.off(".autoresize"),this.$element.removeClass("autoresize"),this.$element.css("overflow",""),this.$element.css("height",""),this.$element.removeAttr("style")},getMirror:function(){var i=this.$element.nextAll(".autoresize-mirror").first();if(!i.length){i=e("<div/>").addClass("autoresize-mirror");for(var n=0;n<t.length;n++)i.css(t[n],this.$element.css(t[n]));i.width(this.$element.width()),this.$element.after(i)}return i.html(this.$element.val().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />")+"<br />"),i},getContentHeight:function(){return this.limitValue(this.getMirror().height(),this.params.minHeight,this.params.maxHeight)},setHeight:function(e,t){var i=this;t?this.$element.stop(!0).animate({height:e+this.params.heightCompensation+"px"},this.params.animationDuration,this.params.animationEasing,function(){i.params.onResize(i.$element,{height:e})}):(this.$element.height(e),this.params.onResize(this.$element,{height:e}))},limitValue:function(e,t,i){return e=0==t||e>t?e:t,e=0==i||i>e?e:i}},e.fn.autoresize=function(t){return this.each(function(){if("destroy"==t){var n;(n=e(this).data("autoresize-api"))?n.destroy():console.error("Can't destroy autoresize api, it's not initialized.")}else new i(this,t)})},e(function(){e("html > head").append(e("<style>.autoresize-mirror { display: none; word-wrap: break-word; white-space: pre-wrap; } .autoresize { resize: none; }</style>"))})}(jQuery);